<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="world" default="$(find-pkg-share rosbot3_gazebo)/worlds/willow_garage.world"/>
  <include file="$(find-pkg-share gazebo_ros)/launch/gzserver.launch.py">
    <arg name="world" value="$(var world)"/>
  </include>
  <include file="$(find-pkg-share gazebo_ros)/launch/gzclient.launch.py">
    <arg name="gui_required" value="true"/>
  </include>
  <arg name="rviz_config" default="/home/user/ROS2AMR/Robotica/rosbot3_simulation/src/rosbot3_description/config/rosbot3.rviz" 
/>

  
  
  <arg name="model" default="$(find-pkg-share rosbot3_gazebo)/urdf/rosbot3.xacro"/>
  
  <node name="robot_state_publisher" pkg="robot_state_publisher" exec="robot_state_publisher">
    <param name="robot_description" value="$(command 'xacro $(var model)')" type="str"/>
  </node>

  <node name="spawn_rosbot3" pkg="gazebo_ros" exec="spawn_entity.py"
    args="-entity rosbot3 -topic /robot_description"
  />

  <node 
      name="rviz2" 
      pkg="rviz2" 
      exec="rviz2"
      args="-d $(var rviz_config)" 
      respawn="true"
      respawn_delay="3"
  />
  
  <include file="$(find-pkg-share ros3_commons)/launch/rqt_steering.launch"/>
</launch>
